<!DOCTYPE html>
<html>
 <head>
  <title>Are We Slim Yet?</title>
  <style type="text/css">
    .graph {
        width: 800px;
        height: 600px;
    }
  </style>
 </head>
 <body>
  <h1>Are We Slim Yet?</h1>
  <h2>Resident memory usage</h2>
  <div id="resident-graph" class="graph">Loading...</div>
  <h2>Explicit memory usage</h2>
  <div id="explicit-graph" class="graph">Loading...</div>
  <hr>

  <script src="jquery-1.7.1.min.js" type="text/javascript"></script>
  <script src="jquery.flot.min.js" type="text/javascript"></script>
  <script type="text/javascript">
    function load( divId, dataFile ) {
        var xhr = new XMLHttpRequest();
        xhr.open( "GET", dataFile );
        xhr.onreadystatechange = function() {
            if (this.readyState == this.DONE) {
                var data;
                if (this.status == 200 && (data = JSON.parse( this.responseText ))) {
                    $.plot( $( '#' + divId ), data );
                } else {
                    document.getElementById( divId ).innerHTML = 'Error fetching graph data :(';
                }
            }
        };
        xhr.send();
    }

    load( 'resident-graph', 'resident.graphdata' );
    load( 'explicit-graph', 'explicit.graphdata' );
  </script>
 </body>
</html>
